# 📌 핸들로 YouTube 댓글 차단 — v0.2.0

[English](README.md) | [한국어](나를읽어.md)

특정 사용자 핸들(@handle)의 댓글을 숨길 수 있는 Tampermonkey 사용자 스크립트입니다. 숨겨진 댓글은 실시간으로 사라지며, 차단 목록은 메뉴에서 관리·가져오기·내보내기가 가능합니다.

---

## ✅ 주요 기능

- 🔇 작성자 핸들을 우클릭하여 차단/해제
- ⋯ 메뉴에 "이 채널 댓글 숨김" 항목 자동 추가
- MutationObserver + IntersectionObserver로 실시간 처리 최적화
- 🔧 차단 목록 팝업:

  - 항목 확인/해제(핸들, 채널 ID, 정규식)
  - 대화상자에서 정규식을 직접 입력하여 추가
  - JSON(v2) 또는 줄바꿈 텍스트로 내보내기
  - JSON(v2/v1) 또는 줄바꿈 텍스트(@handle, /regex/flags, 채널 ID)로 가져오기
- 📝 `GM_registerMenuCommand` 설정:

  - `🔍 차단 목록 관리`
  - `🗑️ 차단 목록 초기화`
  - `🌐 Language: KO/EN`

---

## 🧠 사용 방법

1. [Tampermonkey](https://www.tampermonkey.net/) 설치
2. 새 사용자 스크립트를 만들고 `ytblockhandlecomments.js` 내용을 붙여넣기
3. YouTube 페이지에서 다음 사용 가능:

   - 작성자 핸들을 우클릭하여 차단/해제
   - 핸들이 아닌 곳을 우클릭 → Tampermonkey → YouTube Comment Blocker by Handle → 차단 목록 관리/초기화

---

## 💾 저장 구조

- 저장 키: `blocked_v2`
- 저장 값: `{ version: 2, updatedAt: number, items: Array<{ type: 'handle'|'id'|'regex', value: string, flags?: string }> }`
- 레거시 키 `blockedHandles`, `blockedHandles_v1`에서 자동 마이그레이션
- Tampermonkey의 `GM_getValue`, `GM_setValue` 사용
- JSON(v2/v1) 및 줄바꿈 텍스트 가져오기/내보내기 지원

---

## ⚠️ 한계 및 주의사항

- 핸들은 소문자로 정규화되어 비교합니다 (대소문자 구분 안 함)
- 채널 ID가 있으면 ID 기반 차단이 우선, 없으면 핸들 기반
- 저장 구조는 버전이 있으며 레거시 데이터를 자동으로 마이그레이션함
- 컨텍스트 메뉴는 DOM에 직접 바인딩하지 않고 **위임 이벤트**를 사용함
- `GM_addValueChangeListener`를 통해 **탭 간 동기화**를 지원함
- 정규식은 핸들 텍스트에만 적용(댓글 본문 제외)

---

## 👤 작성자

- **Mango_Clark**
- 라이선스: MIT
